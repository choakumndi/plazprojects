{% load i18n mezzanine_tags accounts_tags %}
<li class="user-details">
{% if request.user.is_authenticated %}
{% url "profile" request.user.username as profile_url %}
{% if not profile_url %}{% url "profile_update" as profile_url %}{% endif %}
<a class="navbar-link" href="{{ profile_url }}"><i class="fa fa-users"></i>
    <span class="glyphicon glyphicon-user">Welcome: </span> {{ request.user|username_or:"email"|title }}</a>
{% else %}
    <a href="{% url "login" %}?next={{ request.path }}">{% trans "Login" %}</a>/<a href="{% url "signup" %}?next={{ request.path }}">{% trans "Registration" %}</a>
{% endif %}
</li>